<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <link rel="shortcut icon" href="images/favicon.png" type="">
    <title>Problem Reported</title>
    <link href="https://fonts.googleapis.com/css?family=Inter&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Mulish&display=swap" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="css/styles.css">
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/list.js/2.3.1/list.min.js"></script>
    <script>
        function showPassword() {
            var x = document.getElementById("passwordInput");
            if (x.type === "password") {
                x.type = "text";
            } else {
                x.type = "password";
            }
        }
        function showCfmPassword() {
            var x = document.getElementById("passwordCfmInput");
            if (x.type === "password") {
                x.type = "text";
            } else {
                x.type = "password";
            }
        }
        var check = function () {
            if (document.getElementById('passwordCfmInput').value == "") {
                document.getElementById('message').innerHTML = '';
                document.getElementById("showCfmPasswordBtn").removeAttribute("style");
            }
            else if (document.getElementById('passwordInput').value ==
                document.getElementById('passwordCfmInput').value) {
                document.getElementById('message').innerHTML = '';
                document.getElementById("signupBtn").disabled = false;
                document.getElementById("showCfmPasswordBtn").removeAttribute("style");
            } else {
                document.getElementById('message').style.color = 'red';
                document.getElementById('message').innerHTML = 'not matching';
                document.getElementById("signupBtn").disabled = true;
                document.getElementById("showCfmPasswordBtn").style.top = "-55px";
            }
        }
    </script>
</head>
{% for message in get_flashed_messages() %}
<div class="alert alert-warning alert-dismissible fade show" role="alert">
    {{ message }}
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
</div>
{% endfor %}


<body style="background: #F7F8FC;">
    <div class="row">
        <div class="col col-2">
            <div class="wrapper">
                <div class="sidebar">
                    <div class="ms-sm-0 row">
                        <div class="ms-4 pt-2 pb-5 logo-content">
                            <img src="images/logo.png" />
                            <span class="sbheadline">Moderator</span>
                        </div>
                    </div>
                    <div class="ms-sm-0 row">
                        <a class=" ps-4 p-3" id="link_sb" href="/moderatoroverview">
                            <img class="icon_sb" src="images/overview_sidebar.png" />
                            <span>Overview</span>
                        </a>
                        <a class="active ps-4 p-3 pt-4 border-start border-3" id="link_sb" href="#">
                            <img class="icon_sb" src="images/problem_reported_sidebar_active.png" />
                            <span>Problems Reported</span>
                        </a>
                        <a class="ps-4 p-3 pt-4" id="link_sb" href="/managestoreowners">
                            <img class="icon_sb" src="images/profile_sidebar.png" />
                            <span>Manage Store Owners</span>
                        </a>
                        <a class="ps-4 p-3 pt-4" id="link_sb" href="/approverejectstoreowners">
                            <img class="icon_sb" src="images/profile_sidebar.png" />
                            <span style="font-size: 15px">Approve / Reject Store Owners</span>
                        </a>
                        <a class="ps-4 p-3 pt-4" id="link_sb" href="/logout">
                            <img class="icon_sb" src="images/logout_sidebar.png" />
                            <span>Log out</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <div class="col ml-5 pt-4">
            <!-- overview header -->
            <div class="row">
                <div class="col-8">
                    <span id="mnheadline">Problems Reported</span>
                </div>
                <div class="col-2 text-end">
                    <img class="me-4" src="images/notif_header.png" />
                </div>
                <div class="col-2 border-start text-end">
                    <span class="me-5" id="mnsubhead"><a style="text-decoration:none;color:black;"
                            href="/userprofile">{{ fullname }}</a></span>
                </div>
            </div>
            <div class="row pt-4">
            </div>
            <!--second row-->
            <div class="container pt-2">
                <div class="row prbox-l">
				
                    <div id="mylist">
                    <!-- first row -->
                    <div class="row pb-5">
                        <div class="col">
                            <span class="align-items-center ms-3" id="headline">Problems Reported<span id="input-text"></span>
									<span id="input-text">
										<div class="dropdown">
										  <a class="btn dropdown-toggle" style="margin-right: 5px;" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
											<img src="images/filter.png" />Filter
										  </a><ul class="dropdown-menu">
											<li><button class="dropdown-item sort" onclick="filterByActive()">Active</button></li>
											<li><button class="dropdown-item sort" onclick="filterByInActive()">Closed</button></li>
											<li><button class="dropdown-item sort" onclick="removeFilter()">All</button></li>
										  </ul>
										</div>
									</span>
							
									<span id="input-text">
										<div class="dropdown">
										  <a class="btn dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
											<img src="images/sort.png"/>Sort
										  </a><ul class="dropdown-menu">
											<li><button class="dropdown-item sort" data-sort="fullname">Store Owners Name</button></li>
											<li><button class="dropdown-item sort" data-sort="description">Report Title</button></li>
											<li><button class="dropdown-item sort" data-sort="reporteddate">Report Date</button></li>
										  </ul>
										</div>
									</span>
						</div>
                    </div>
                    <!-- second row -->
                    <div class="row">
                        <div class="col-3 pb-3">
                            <span class="ms-3" id="header">Report Title</span>
                        </div>
                        <div class="col-3">
                            <span class="ms-3" id="header">Store Owners Name</span>
                        </div>
                        <div class="col-2">
                            <span class="" id="header">Date Reported</span>
                        </div>
                        <div class="col-1">
                            <span class="ms-4" id="header">Status</span>
                        </div>
                    </div>
                    <hr>
                        <ul class="list list-group list-group-flush" style="border-bottom: 2px solid #DFE0EB;"></ul>
                        <div class="d-flex justify-content-center mt-2">
                            <ul class="pagination"></ul>
                        </div>
                    </div>
                    <div>
                        <!-- third row -->
                        <div style="display:none;">
                            <li id="myitem" class="list-group-item">
                                <div class="row pt-3 pb-3 esobox align-items-center">
                                    <!--col 1-->
                                    <div class="col-3">                                        
                                        <span class="description" id="inputhead"></span>
                                    </div>
                                    <!--col 2-->
                                    <div class="col-3">
										<img id="profile-picture" src="images/profile_pic.png" /><span
                                            class="fullname pb-2" id="name"></span>
                                    </div>
                                    <!--col 4-->
                                    <div class="col-2">
                                        <span class="datereported ms-2" id="date"></span>
                                    </div>
                                    <!--col 6-->
                                    <div class="col-1">
                                        <span class="pb-2"><img class="status" /></span>
                                    </div>
                                    <div class="col-1 ms-3">
										<button class="actionmodaltarget action-button ms-5" data-bs-toggle="modal">
										<span class="actiontext" id="inputhead"></span>
										</button>
									</div>
                                    <div class="col ms-5">
                                        <span class="ms-5 pb-2"><img class="action" src="images/ellipsis.png" /></span>
                                    </div>
                                </div>
								<div class="actionmodalbox modal fade" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
										  <div class="modal-dialog">
											<div class="modal-content">
											  <div class="modal-header">
												<h1 class="modal-title actiontext2 fs-5" id="exampleModalLabel"></h1>
												<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
											  </div>
											  <div class="modal-body actiontext3">
											  </div>
											  <div class="modal-footer">
												<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
												<form action="/actionissue" method="POST">
												<button type="submit" class="actionbutton btn btn-primary" name="action" >Confirm action</button>
												</form>
											  </div>
											</div>
										  </div>
										</div>
                            </li>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
<script>

	const data = {{ all_issues | tojson }}

    const options = {
        valueNames: ['fullname',{name:"status","attr":"src"},'datereported','description',{ name: 'actionmodalbox', attr: 'id' },{ name: 'actionmodaltarget', attr: 'data-bs-target' },{ name: 'actionbutton', attr: 'value' },'actiontext','actiontext2','actiontext3'],
        item: 'myitem',
        page: 10,
        pagination: true
    }

		var l = new List('mylist', options, data);
		
		function filterByActive()
		{			
			l.filter(function(item) {
			if (item.values().status == "images/active.png") {
			   return true;
			} else {
			   return false;
			}
			}); // Only items with id > 1 are shown in list
		}
		function filterByInActive()
		{			
			l.filter(function(item) {
			if (item.values().status == "images/closed.png") {
			   return true;
			} else {
			   return false;
			}
			}); // Only items with id > 1 are shown in list
		}
		function removeFilter()
		{			
			l.filter(); // Remove all filters
		}
</script>

</html>